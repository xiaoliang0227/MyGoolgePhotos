package com.zyl.demo.photos.widget;import android.annotation.TargetApi;import android.content.Context;import android.os.Build;import android.util.AttributeSet;import android.view.LayoutInflater;import android.view.View;import android.widget.CompoundButton;import android.widget.ImageView;import android.widget.LinearLayout;import com.zyl.demo.photos.R;/** * Created by JasonZhao on 14-6-18. */public class ImageItemSelectWidget extends LinearLayout {  private static final String TAG = "ImageItemSelectWidget";  private Context context;  private View view;  private ImageView switchView;  private boolean checked;  private OnStateChangeListener stateChangeListener;  public void setStateChangeListener(OnStateChangeListener stateChangeListener) {    this.stateChangeListener = stateChangeListener;  }  public boolean isChecked() {    return checked;  }  public void setChecked(boolean checked) {    this.checked = checked;    switchView.getDrawable().setLevel(checked ? 1 : 0);  }  public ImageItemSelectWidget(Context context) {    super(context);    this.context = context;  }  public ImageItemSelectWidget(Context context, AttributeSet attrs) {    super(context, attrs);    this.context = context;    init();  }  private void init() {    initView();    initField();    addListener();  }  private void addListener() {    switchView.setOnClickListener(new OnClickListener() {      @Override      public void onClick(View view) {        checked = !checked;        setChecked(checked);        if (null != stateChangeListener) {          stateChangeListener.onStateChangeListener(checked);        }      }    });  }  private void initField() {    switchView = (ImageView) view.findViewById(R.id.switch_img);  }  private void initView() {    view = LayoutInflater.from(context).inflate(R.layout.widget_image_item_select, null);    addView(view);  }  @TargetApi(Build.VERSION_CODES.HONEYCOMB)  public ImageItemSelectWidget(Context context, AttributeSet attrs, int defStyle) {    super(context, attrs, defStyle);    this.context = context;  }  public interface OnStateChangeListener extends CompoundButton.OnCheckedChangeListener {     void onStateChangeListener(boolean isChecked);  }}